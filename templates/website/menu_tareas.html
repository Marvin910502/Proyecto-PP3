{% extends 'website/theme/base_website.html' %}
{% load static %}

{% block content %}
    <div class="card mt-3">
        <div class="card-header">
            <div class="row">
                <a href="/investigaciones/" class="mt-2 link-secondary" style="text-decoration: none"><h2>{{ investigacion_nombre }} | Tareas</h2></a>
            </div>
        </div>
        <div class="card-body">
            <div class="row border">
                <div class="col-10 border p-2">
                    <h3>Descripción:</h3>
                    <p>{{ investigacion.descripcion }}</p>
                </div>
                <div class="col-2 border p-2">
                    <p class="text-center fs-3">{{ investigacion.horas_mensuales_necesarias }} Horas Mensuales</p>
                </div>
            </div>
            <div class="row border">
                <div class="col-4 border p-2">
                    <h3>Fecha de comienzo:</h3>
                    <p>{{ investigacion.fecha_comienzo }}</p>
                </div>
                <div class="col-4 border p-2">
                    <h3>Fecha de culminación:</h3>
                    <p>{{ investigacion.fecha_culminacion }}</p>
                </div>
                <div class="col-4 border p-2">
                    <h3>Participantes:</h3>
                    {% for participante in participantes %}
                        <p>{{ participante.nombre }} {{ participante.apellidos }}</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        {% block tarjetas %}
            {% for Tarea in Tareas %}
                {% if Tarea.investigacion|stringformat:"s" == investigacion_nombre %}
                <div class="col-4 mt-4">
                    <div class="card text-center">
                        <div class="card-header">
                          <h3 class="card-title">{{ Tarea.nombre }}</h3>
                        </div>
                        <div class="card-body">
                          <h5>{{ Tarea.horas_necesarias }} Horas</h5>
                          <p class="card-text" style="min-height: 3rem">{{ Tarea.descripcion }}</p>
                          <a href="{% url 'tarea_contenido' Tarea.nombre user.username %}" class="btn btn-primary">Entrar</a>
                          <a href="{% url 'editar_tarea' Tarea.id %}" class="btn btn-success">Editar</a>
                        </div>
                        <div class="card-footer text-muted">
                            <div class="row">
                                <div class="col-6 ps-1 pe-1"><span class="fs-6">{{ Tarea.fecha_comienzo }}</span></div>
                                <div class="col-6 ps-1 pe-1"><span class="fs-6">{{ Tarea.fecha_culminacion }}</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        {% endblock tarjetas %}
    </div>
    <div class="row mt-5 me-2">
        <div class="col-5"></div>
        <div class="col-2">
            <a href="{% url 'crear_tarea' investigacion_nombre %}" class="btn btn-primary fs-1 ps-4 pe-4 pb-3 mb-5">+</a>
        </div>
        <div class="col-5"></div>
    </div>
{% endblock content %}
